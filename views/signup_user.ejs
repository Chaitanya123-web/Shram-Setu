<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign Up</title>
  <link rel="stylesheet" href="style/style.css" />
</head>
<body>
  <div class="container">
    <!-- Left Panel -->
    <div class="left-panel">
      <img src="images/logo.png" alt="Shram Setu Logo" class="logo"/>
      <p class="p">Connecting Labor with Dignity</p>
    </div>

    <!-- Right Panel - Sign Up -->
    <div class="right-panel">
      <div class="form-box">
        <h1>Sign Up</h1>
        <form action="/signup_user" method="post">
          <label for="name">Name</label>
          <input type="text" id="name" placeholder="Enter your Name" name="name" required />

          <label for="signup-id">Mobile Number</label>
          <input type="text" id="signup-id" placeholder="Enter your Mobile Number" name="mobile" required />

          <label for="location_display">Location</label>
          <input type="text" id="location_display" placeholder="Your location" readonly required />

          <input type="hidden" name="latitude" id="latitude" />
          <input type="hidden" name="longitude" id="longitude" />
          <input type="hidden" name="location" id="location" />

          <label for="signup-password">Password</label>
          <div class="input-wrapper">
            <input type="password" id="signup-password" placeholder="Create password" name="password" required />
            <span class="toggle-password" onclick="togglePassword('signup-password', this)">ðŸ‘€</span>
          </div>

          <label for="confirm-password">Confirm Password</label>
          <div class="input-wrapper">
            <input type="password" id="confirm-password" placeholder="Re-enter password" name="confirm_password" required />
            <span class="toggle-password" onclick="togglePassword('confirm-password', this)">ðŸ‘€</span>
          </div>

          <button type="submit">Sign Up</button>
          <p>Already have an account? <a href="/login_user">Login</a></p>
        </form>
      </div>
    </div>
  </div>

  <script>
  async function getLocation() {
    navigator.geolocation.getCurrentPosition(async function(position) {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      const response = await fetch("/mylocation", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ latitude: lat, longitude: lng })
      });

      const data = await response.json();
      document.getElementById("latitude").value = lat;
      document.getElementById("longitude").value = lng;
      document.getElementById("location").value = data.formatted;
      document.getElementById("location_display").value = data.formatted;
    });
  }

  // Auto trigger on page load
  window.onload = getLocation;
  </script>

  <script src="script/script.js"></script>
</body>
</html>
